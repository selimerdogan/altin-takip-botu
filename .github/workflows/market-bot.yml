name: Fon Botu (Hafta Ici 11:00)

on:
  schedule:
    # Türkiye Saati: 11:00 -> UTC: 08:00
    # 1-5: Pazartesi'den Cuma'ya
    - cron: '0 8 * * 1-5'
  
  # Elle çalıştırmak için
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Kodları Çek
        uses: actions/checkout@v3

      - name: Python Kur
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Kütüphaneleri Yükle
        run: |
          pip install firebase-admin requests pandas

      # --- İŞTE BU ADIM EKSİKTİ, EKLENDİ ---
      - name: Gizli Anahtarı Dosyaya Dönüştür
        env:
          FIREBASE_KEY: ${{ secrets.FIREBASE_KEY }}
        run: |
          echo "$FIREBASE_KEY" > serviceAccountKey.json

      - name: Fon Botunu Çalıştır
        run: python tefas_bot.py
